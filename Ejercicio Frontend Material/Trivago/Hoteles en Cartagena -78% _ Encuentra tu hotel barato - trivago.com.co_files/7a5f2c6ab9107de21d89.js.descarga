webpackJsonp([22],{284:function(t,e,n){"use strict";e.__esModule=!0;var i=n(1),o=babelHelpers.interopRequireDefault(i);e["default"]={changeSorting:o["default"].createAction("ItemListControls:changeSorting"),tooltipInteraction:o["default"].createAction()},t.exports=e["default"]},590:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19">\n    <path class="svg-color--primary" fill="#37454D"\n          d="M9.373 0C4.127.07-.07 4.383 0 9.63c.07 5.244 4.38 9.44 9.627 9.37 5.245-.07 9.442-4.38 9.372-9.626-.07-5.245-4.38-9.44-9.627-9.37zm1.053 3.167c.966 0 1.25.56 1.25 1.2 0 .8-.64 1.542-1.733 1.542-.915 0-1.35-.462-1.325-1.222 0-.64.537-1.52 1.808-1.52zM7.95 15.437c-.66 0-1.144-.4-.682-2.16l.757-3.125c.132-.5.154-.7 0-.7-.198 0-1.055.346-1.56.686l-.33-.54C7.74 8.257 9.586 7.47 10.377 7.47c.66 0 .77.78.44 1.98l-.867 3.285c-.153.58-.087.78.067.78.198 0 .847-.24 1.484-.74l.375.5c-1.56 1.56-3.265 2.163-3.925 2.163z"/>\n</svg>\n'},1001:function(t,e,n){"use strict";e.__esModule=!0;var i=n(1),o=babelHelpers.interopRequireDefault(i),a=n(284),r=babelHelpers.interopRequireDefault(a),s=n(3),l=babelHelpers.interopRequireDefault(s),u=n(37),c=n(10),p=n(37),d=babelHelpers.interopRequireDefault(p),f=n(16),h=n(376),g=function(t,e){c.logUseraction("100:"+t+":"+e)},_=function(t){g(h.LOG.pageId,t)},b=o["default"].Model.extend({defaults:{orderBy:"relevance",sortBoost:null,isDistanceSortingAvailable:!0,isStrict:!1,needNotification:!1,pathName:"",tooltipOpen:!1},relevantOrderByValues:["relevance","distance","overall_liking","price"],relevantSortingOrderBoostingValues:["distance","price","rating"],sortDirection:{relevance:"desc",distance:"asc",overall_liking:"desc",price:"asc"},sortLoggingMap:{relevance:"1",distance:"2",overall_liking:"3",price:"4",random:"9"},boostLoggingMap:{rating:"1",price:"2",distance:"4"},initialize:function(){this.listenTo(app,"change:sOrderBy",(function(t){t=this.normalizeOrderByServerValue(t),this.setProperties(t,this.attributes.sortBoost)})),this.listenTo(app,"change:aSortingOrderBoosting",(function(t){t=this.normalizeSortBoostServerValue(t),this.setProperties(this.attributes.orderBy,t)})),this.listenTo(app,"change:bIsCity",(function(t){this.set({isDistanceSortingAvailable:t})})),this.listenTo(app,"change:sPlainPathName",(function(t){this.set({pathName:t})})),this.listenTo(d["default"].releaseSlider,function(t){if("distance"===t.filterName){var e=t.attributes.percentage||100;if(100!==e){var n=this.extractOrderBy(app.request("param:get","sOrderBy")),i=this.extractSortBoost(app.request("param:get","aSortingOrderBoosting"));null===n||"relevance"===n&&"distance"===i||"distance"===n&&null===i||this.setParam(this.buildSortParam("relevance","distance"))}}}.bind(this)),u.resetAll.on((function(){this.setParam({aSortingOrderBoosting:null})}),this);var t=app.request("param:get","bIsCity"),e=app.request("param:get","sPlainPathName"),n=app.request("param:get","sOrderBy"),i=app.request("param:get","aSortingOrderBoosting");"random"===n&&g("2119","9"),this.set({isDistanceSortingAvailable:t,pathName:e}),i=this.normalizeSortBoostServerValue(i),n=this.normalizeOrderByServerValue(n),this.setProperties(n,i,!0),this.bindToActions()},bindToActions:function(){var t=this;r["default"].changeSorting.on((function(e,n){t.logSortChange(e,n),t.setParam(t.buildSortParam(e,n))}),this),r["default"].tooltipInteraction.on((function(e){switch(e){case h.INTERACTION_TYPE.linkClick:_(h.LOG.linkClick),t.setTooltipOpen(!1),r["default"].changeSorting("rating"===t.attributes.sortBoost?"overall_liking":t.attributes.sortBoost,null);break;case h.INTERACTION_TYPE.click:f.isTouch&&t.setTooltipOpen(!t.attributes.tooltipOpen);break;case h.INTERACTION_TYPE.mouseenter:f.isTouch||t.setTooltipOpen(!0);break;case h.INTERACTION_TYPE.mouseleave:f.isTouch||t.setTooltipOpen(!1)}}),this)},setTooltipOpen:function(t){t!==this.attributes.tooltipOpen&&(_(t?h.LOG.open:h.LOG.close),this.set({tooltipOpen:t}))},normalizeSortBoostServerValue:function(t){return t=l["default"].isArray(t)&&t.length>0?t[0]:t,this.relevantSortingOrderBoostingValues.includes(t)?t:null},normalizeOrderByServerValue:function(t){return t=this.extractOrderBy(t),t?this.relevantOrderByValues.includes(t)?t:this.attributes.orderBy:null},logSortChange:function(t,e){var n=this.sortDirection[t],i=this.sortLoggingMap[t]+("asc"===n?"1":"2");e&&(i=this.boostLoggingMap[e]+i),g("2119",i)},setProperties:function(t,e,n){e=l["default"].isEmpty(e)?null:e,this.set({orderBy:t,sortBoost:e,isStrict:!e&&"relevance"!==t,needNotification:null!==e&&!n})},setParam:function(t){app.execute("param:set",t)},buildSortParam:function(t,e){return{sOrderBy:t+" "+this.sortDirection[t],aSortingOrderBoosting:e?[e]:[]}},extractOrderBy:function(t){return"string"==typeof t&&t.length>0?t.split(" ")[0]:null},extractSortBoost:function(t){return"string"==typeof t&&this.relevantSortingOrderBoostingValues.includes(t)?t:null}});e["default"]=b,t.exports=e["default"]},1002:function(t,e,n){"use strict";function i(t,e){switch(t){case"rating":return{explanation:o.translate("relevance_sorting_notification_explanation_rating",{path:e}),sortStrict:o.translate("relevance_sorting_notification_strict_rating",{path:e})};case"distance":return{explanation:o.translate("relevance_sorting_notification_explanation_distance",{path:e}),sortStrict:o.translate("relevance_sorting_notification_strict_distance",{path:e})};case"price":return{explanation:o.translate("relevance_sorting_notification_explanation_price",{path:e}),sortStrict:o.translate("relevance_sorting_notification_strict_price",{path:e})};default:return{}}}var o=n(7),a=n(1),r=n(284),s=a.BaseView.extend({modelEvents:{"change:needNotification":"update","change:sortBoost":"update"},template:n(1459),events:{"click .js_strict_sorting span":function(){var t="rating"===this.model.attributes.sortBoost?"overall_liking":this.model.attributes.sortBoost;r.changeSorting(t,null)}},onRender:function(){if(this.model.attributes.needNotification){var t=this.template(i(this.model.attributes.sortBoost,this.model.attributes.pathName));this.$el.html(t)}else this.$el.html("")}});t.exports=s},1003:function(t,e,n){"use strict";e.__esModule=!0;var i=n(7),o=n(1),a=babelHelpers.interopRequireDefault(o),r=n(4),s=babelHelpers.interopRequireDefault(r),l=n(284),u=babelHelpers.interopRequireDefault(l),c=n(10),p={distance:i.translate("distance"),relevance:i.translate("order_by_relevance"),overall_liking:i.translate("order_by_overall_liking"),price:i.translate("order_by_price")},d=a["default"].BaseView.extend({separator:"-",events:{change:"onSelectChange",mousedown:"onSelectOpen"},template:n(1460),$option:null,modelEvents:{"change:orderBy":"update","change:sortBoost":"update","change:isStrict":"update","change:isDistanceSortingAvailable":"onChangeIsCity"},onSelectOpen:function(t){this.$el.is(":focus")||c.logUseraction("100:2119:60")},onSelectChange:function(t){var e=s["default"](t.currentTarget).val(),n=this.decomposeSelectValue(e);u["default"].changeSorting(n.orderBy,n.sortBoost)},appendOptionIfNeeded:function(){if(this.clearOption(),this.model.attributes.isStrict){var t=this.model.attributes.orderBy,e=p[t],n=this.template({sValue:t,sLabel:e});this.$option=s["default"](n),this.$el.append(this.$option)}},clearOption:function(){null!==this.$option&&(this.$option.remove(),this.$option=null)},onChangeIsCity:function(t,e){var n=this.$el.find('[data-category="distance"]');n.toggleClass("sbDisabled"),e?n.prop("disabled",!1):n.prop("disabled",!0)},onRender:function(){if(null!==this.model.attributes.orderBy){this.appendOptionIfNeeded();var t=this.composeSelectValue(this.model.attributes.orderBy,this.model.attributes.sortBoost);this.$el.val(t)}},composeSelectValue:function(t,e){return e?e+this.separator+t:t},decomposeSelectValue:function(t){var e,n=t.split("-");return e=n.length>1?{orderBy:n[1],sortBoost:n[0]}:{orderBy:t,sortBoost:null}}});e["default"]=d,t.exports=e["default"]},1004:function(t,e,n){"use strict";e.__esModule=!0;var i=n(1),o=babelHelpers.interopRequireDefault(i),a=n(12),r=babelHelpers.interopRequireDefault(a),s=n(8),l=n(7),u=n(284),c=babelHelpers.interopRequireDefault(u),p=n(376),d=r["default"].l10n.platform_locale,f=function(t,e){switch(t){case"rating":return{explanation:l.translate("relevance_sorting_notification_explanation_rating",{path:e}),sortStrict:l.translate("relevance_sorting_notification_strict_rating",{path:e})};case"distance":return{explanation:l.translate("relevance_sorting_notification_explanation_distance",{path:e}),sortStrict:l.translate("relevance_sorting_notification_strict_distance",{path:e})};case"price":return{explanation:l.translate("relevance_sorting_notification_explanation_price",{path:e}),sortStrict:l.translate("relevance_sorting_notification_strict_price",{path:e})};default:return!1}};e["default"]=o["default"].BaseView.extend({modelEvents:{"change:needNotification":"update","change:orderBy":"update","change:sortBoost":"update","change:tooltipOpen":"toggleOpen"},templateLegal:n(1427),templateStrictSorting:n(1428),events:{"click .js_sort_link":function(){c["default"].tooltipInteraction(p.INTERACTION_TYPE.linkClick)},"click .js_tooltip":function(){c["default"].tooltipInteraction(p.INTERACTION_TYPE.click)},"mouseenter .js_tooltip":function(){c["default"].tooltipInteraction(p.INTERACTION_TYPE.mouseenter)},"mouseleave .js_tooltip":function(){c["default"].tooltipInteraction(p.INTERACTION_TYPE.mouseleave)}},toggleOpen:function(){this.$el.find(".js_tooltip__body").toggleClass("tooltip__body--open",this.model.attributes.tooltipOpen)},onRender:function(){var t=f(this.model.attributes.sortBoost,this.model.attributes.pathName),e="";s.isCTestActive(p.C_TESTS.sortBoosting)&&t!==!1?e=this.templateStrictSorting(t):"FR"!==d||"relevance"!==this.model.attributes.orderBy||this.model.attributes.sortBoost||(e=this.templateLegal()),this.$el.html(e)}}),t.exports=e["default"]},1427:function(t,e,n){var i=n(5),o=function(t,e,i,o,a){var r=(t.extensions,"");return r+='<div class="tooltip fr-notification js_tooltip">\n    ',r+='<span class="icon-ic '+({classList:"icon-contain fr-notification__icon"}.classList||"")+'">'+n(590)+"</span>",r+='\n    <span class="tooltip__body tooltip__body--left js_tooltip__body">\n        ',r+=i.e(i.translate("notification_sort_popularity_tt1")),r+=" ",r+=i.e(i.translate("notification_sort_popularity_tt2")),r+="\n    </span>\n</div>\n"};t.exports=function(t){return i.run(o,t)}},1428:function(t,e,n){var i=n(5),o=function(t,e,i,o,a){var r=(t.extensions,"");return r+='<div class="tooltip sorting-notification js_tooltip">\n    ',r+='<span class="icon-ic '+({classList:"icon-contain sorting-notification__icon"}.classList||"")+'">'+n(590)+"</span>",r+='\n    <span class="tooltip__body tooltip__body--left js_tooltip__body">\n        ',r+=i.e(null!==("undefined"!=typeof e.explanation&&null!==e.explanation?"undefined"!=typeof e.explanation&&null!==e.explanation?e.explanation:"":"undefined"!=typeof explanation&&null!==explanation?explanation:"")?"undefined"!=typeof e.explanation&&null!==e.explanation?"undefined"!=typeof e.explanation&&null!==e.explanation?e.explanation:"":"undefined"!=typeof explanation&&null!==explanation?explanation:"":""),r+='.\n        <span class="js_sort_link sort-link">',r+=i.e(null!==("undefined"!=typeof e.sortStrict&&null!==e.sortStrict?"undefined"!=typeof e.sortStrict&&null!==e.sortStrict?e.sortStrict:"":"undefined"!=typeof sortStrict&&null!==sortStrict?sortStrict:"")?"undefined"!=typeof e.sortStrict&&null!==e.sortStrict?"undefined"!=typeof e.sortStrict&&null!==e.sortStrict?e.sortStrict:"":"undefined"!=typeof sortStrict&&null!==sortStrict?sortStrict:"":""),r+="</span>\n    </span>\n</div>\n"};t.exports=function(t){return i.run(o,t)}},1459:function(t,e,n){var i=n(5),o=function(t,e,n,i,o){var a=(t.extensions,"");return a+='\n    <div class="results_for_box js_strict_sorting">\n        ',a+=n.e(null!==("undefined"!=typeof e.explanation&&null!==e.explanation?"undefined"!=typeof e.explanation&&null!==e.explanation?e.explanation:"":"undefined"!=typeof explanation&&null!==explanation?explanation:"")?"undefined"!=typeof e.explanation&&null!==e.explanation?"undefined"!=typeof e.explanation&&null!==e.explanation?e.explanation:"":"undefined"!=typeof explanation&&null!==explanation?explanation:"":""),a+='.\n        <span class="sort-link">',a+=n.e(null!==("undefined"!=typeof e.sortStrict&&null!==e.sortStrict?"undefined"!=typeof e.sortStrict&&null!==e.sortStrict?e.sortStrict:"":"undefined"!=typeof sortStrict&&null!==sortStrict?sortStrict:"")?"undefined"!=typeof e.sortStrict&&null!==e.sortStrict?"undefined"!=typeof e.sortStrict&&null!==e.sortStrict?e.sortStrict:"":"undefined"!=typeof sortStrict&&null!==sortStrict?sortStrict:"":""),a+="</span></div>\n",a+="\n"};t.exports=function(t){return i.run(o,t)}},1460:function(t,e,n){var i=n(5),o=function(t,e,n,i,o){var a=(t.extensions,"");return a+='<option class="js_strict_sorting_option" value="',a+=n.e(null!==("undefined"!=typeof e.sValue&&null!==e.sValue?"undefined"!=typeof e.sValue&&null!==e.sValue?e.sValue:"":"undefined"!=typeof sValue&&null!==sValue?sValue:"")?"undefined"!=typeof e.sValue&&null!==e.sValue?"undefined"!=typeof e.sValue&&null!==e.sValue?e.sValue:"":"undefined"!=typeof sValue&&null!==sValue?sValue:"":""),a+='">\n        ',a+=n.e(n.translate("sortby")),a+=" ",a+=n.e(null!==("undefined"!=typeof e.sLabel&&null!==e.sLabel?"undefined"!=typeof e.sLabel&&null!==e.sLabel?e.sLabel:"":"undefined"!=typeof sLabel&&null!==sLabel?sLabel:"")?"undefined"!=typeof e.sLabel&&null!==e.sLabel?"undefined"!=typeof e.sLabel&&null!==e.sLabel?e.sLabel:"":"undefined"!=typeof sLabel&&null!==sLabel?sLabel:"":""),a+="\n</option>\n"};t.exports=function(t){return i.run(o,t)}}});